<!DOCTYPE html>

<html lang="en">

<head>

Â  Â  <meta charset="UTF-8">

Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">

Â  Â  <title>Landmark MSR Apartment Manager</title>

Â  Â  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

Â  Â  <style>

Â  Â  Â  Â  /* --- START OF CSS STYLES --- */

Â  Â  Â  Â  * {

Â  Â  Â  Â  Â  Â  margin: 0;

Â  Â  Â  Â  Â  Â  padding: 0;

Â  Â  Â  Â  Â  Â  box-sizing: border-box;

Â  Â  Â  Â  }



Â  Â  Â  Â  body {

Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;

Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

Â  Â  Â  Â  Â  Â  min-height: 100vh;

Â  Â  Â  Â  Â  Â  color: #333;

Â  Â  Â  Â  }



Â  Â  Â  Â  .container {

Â  Â  Â  Â  Â  Â  max-width: 1200px;

Â  Â  Â  Â  Â  Â  margin: 0 auto;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .header {

Â  Â  Â  Â  Â  Â  text-align: center;

Â  Â  Â  Â  Â  Â  margin-bottom: 30px;

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  }



Â  Â  Â  Â  .header h1 {

Â  Â  Â  Â  Â  Â  font-size: 2.5rem;

Â  Â  Â  Â  Â  Â  margin-bottom: 10px;

Â  Â  Â  Â  Â  Â  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);

Â  Â  Â  Â  }



Â  Â  Â  Â  .tabs {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  border-radius: 10px 10px 0 0;

Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 6px rgba(0,0,0,0.1);

Â  Â  Â  Â  Â  Â  overflow: hidden;

Â  Â  Â  Â  }



Â  Â  Â  Â  .tab {

Â  Â  Â  Â  Â  Â  flex: 1;

Â  Â  Â  Â  Â  Â  padding: 15px 20px;

Â  Â  Â  Â  Â  Â  background: #f8f9fa;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  font-weight: 600;

Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;

Â  Â  Â  Â  Â  Â  border-bottom: 3px solid transparent;

Â  Â  Â  Â  }



Â  Â  Â  Â  .tab:hover {

Â  Â  Â  Â  Â  Â  background: #e9ecef;

Â  Â  Â  Â  }



Â  Â  Â  Â  .tab.active {

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  border-bottom-color: #667eea;

Â  Â  Â  Â  Â  Â  color: #667eea;

Â  Â  Â  Â  }



Â  Â  Â  Â  .content {

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  border-radius: 0 0 10px 10px;

Â  Â  Â  Â  Â  Â  padding: 30px;

Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 6px rgba(0,0,0,0.1);

Â  Â  Â  Â  Â  Â  min-height: 500px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .tab-content {

Â  Â  Â  Â  Â  Â  display: none;

Â  Â  Â  Â  }



Â  Â  Â  Â  .tab-content.active {

Â  Â  Â  Â  Â  Â  display: block;

Â  Â  Â  Â  }



Â  Â  Â  Â  .form-group {

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .form-row {

Â  Â  Â  Â  Â  Â  display: flex;

Â  Â  Â  Â  Â  Â  gap: 15px;

Â  Â  Â  Â  Â  Â  margin-bottom: 15px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .form-row > * {

Â  Â  Â  Â  Â  Â  flex: 1;

Â  Â  Â  Â  }



Â  Â  Â  Â  label {

Â  Â  Â  Â  Â  Â  display: block;

Â  Â  Â  Â  Â  Â  margin-bottom: 5px;

Â  Â  Â  Â  Â  Â  font-weight: 600;

Â  Â  Â  Â  Â  Â  color: #495057;

Â  Â  Â  Â  }



Â  Â  Â  Â  input, textarea, select {

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  padding: 10px;

Â  Â  Â  Â  Â  Â  border: 2px solid #e9ecef;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  font-size: 14px;

Â  Â  Â  Â  Â  Â  transition: border-color 0.3s ease;

Â  Â  Â  Â  }



Â  Â  Â  Â  input:focus, textarea:focus, select:focus {

Â  Â  Â  Â  Â  Â  outline: none;

Â  Â  Â  Â  Â  Â  border-color: #667eea;

Â  Â  Â  Â  }



Â  Â  Â  Â  button {

Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

Â  Â  Â  Â  Â  Â  color: white;

Â  Â  Â  Â  Â  Â  padding: 12px 24px;

Â  Â  Â  Â  Â  Â  border: none;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  cursor: pointer;

Â  Â  Â  Â  Â  Â  font-size: 16px;

Â  Â  Â  Â  Â  Â  font-weight: 600;

Â  Â  Â  Â  Â  Â  transition: transform 0.2s ease;

Â  Â  Â  Â  }



Â  Â  Â  Â  button:hover {

Â  Â  Â  Â  Â  Â  transform: translateY(-2px);

Â  Â  Â  Â  }



Â  Â  Â  Â  .data-table {

Â  Â  Â  Â  Â  Â  width: 100%;

Â  Â  Â  Â  Â  Â  border-collapse: collapse;

Â  Â  Â  Â  Â  Â  margin-top: 20px;

Â  Â  Â  Â  Â  Â  background: white;

Â  Â  Â  Â  Â  Â  border-radius: 8px;

Â  Â  Â  Â  Â  Â  overflow: hidden;

Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 4px rgba(0,0,0,0.1);

Â  Â  Â  Â  }



Â  Â  Â  Â  .data-table th {

Â  Â  Â  Â  Â  Â  background: #f8f9fa;

Â  Â  Â  Â  Â  Â  padding: 12px;

Â  Â  Â  Â  Â  Â  text-align: left;

Â  Â  Â  Â  Â  Â  font-weight: 600;

Â  Â  Â  Â  Â  Â  color: #495057;

Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #e9ecef;

Â  Â  Â  Â  }



Â  Â  Â  Â  .data-table td {

Â  Â  Â  Â  Â  Â  padding: 12px;

Â  Â  Â  Â  Â  Â  border-bottom: 1px solid #e9ecef;

Â  Â  Â  Â  }



Â  Â  Â  Â  .data-table tr:hover {

Â  Â  Â  Â  Â  Â  background: #f8f9fa;

Â  Â  Â  Â  }



Â  Â  Â  Â  .delete-btn {

Â  Â  Â  Â  Â  Â  background: #dc3545;

Â  Â  Â  Â  Â  Â  padding: 6px 12px;

Â  Â  Â  Â  Â  Â  font-size: 12px;

Â  Â  Â  Â  Â  Â  border-radius: 3px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .delete-btn:hover {

Â  Â  Â  Â  Â  Â  background: #c82333;

Â  Â  Â  Â  }



Â  Â  Â  Â  .status {

Â  Â  Â  Â  Â  Â  padding: 4px 8px;

Â  Â  Â  Â  Â  Â  border-radius: 12px;

Â  Â  Â  Â  Â  Â  font-size: 12px;

Â  Â  Â  Â  Â  Â  font-weight: 600;

Â  Â  Â  Â  Â  Â  text-transform: uppercase;

Â  Â  Â  Â  }



Â  Â  Â  Â  .status.open { background: #d4edda; color: #155724; }

Â  Â  Â  Â  .status.in-progress { background: #fff3cd; color: #856404; }

Â  Â  Â  Â  .status.closed { background: #d1ecf1; color: #0c5460; }



Â  Â  Â  Â  .db-status {

Â  Â  Â  Â  Â  Â  position: fixed;

Â  Â  Â  Â  Â  Â  top: 20px;

Â  Â  Â  Â  Â  Â  right: 20px;

Â  Â  Â  Â  Â  Â  padding: 10px 20px;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  font-weight: 600;

Â  Â  Â  Â  Â  Â  font-size: 14px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .db-connected {

Â  Â  Â  Â  Â  Â  background: #d4edda;

Â  Â  Â  Â  Â  Â  color: #155724;

Â  Â  Â  Â  }



Â  Â  Â  Â  .db-disconnected {

Â  Â  Â  Â  Â  Â  background: #f8d7da;

Â  Â  Â  Â  Â  Â  color: #721c24;

Â  Â  Â  Â  }



Â  Â  Â  Â  .setup-notice {

Â  Â  Â  Â  Â  Â  background: #fff3cd;

Â  Â  Â  Â  Â  Â  border: 1px solid #ffeaa7;

Â  Â  Â  Â  Â  Â  padding: 20px;

Â  Â  Â  Â  Â  Â  border-radius: 5px;

Â  Â  Â  Â  Â  Â  margin-bottom: 20px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .setup-notice h3 {

Â  Â  Â  Â  Â  Â  color: #856404;

Â  Â  Â  Â  Â  Â  margin-bottom: 10px;

Â  Â  Â  Â  }



Â  Â  Â  Â  .setup-notice p {

Â  Â  Â  Â  Â  Â  color: #856404;

Â  Â  Â  Â  Â  Â  line-height: 1.5;

Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- END OF CSS STYLES --- */

Â  Â  </style>

</head>

<body>

Â  Â  <div class="container">

Â  Â  Â  Â  <div class="header">

Â  Â  Â  Â  Â  Â  <h1>ğŸ  Landmark MSR Avenue Apartment Manager</h1>

Â  Â  Â  Â  Â  Â  <p>Manage your apartment ledger, contacts, and issues</p>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div class="tabs">

Â  Â  Â  Â  Â  Â  <button class="tab active" data-tab-name="ledger" onclick="showTab('ledger', event)">ğŸ’° Ledger</button>

Â  Â  Â  Â  Â  Â  <button class="tab" data-tab-name="contacts" onclick="showTab('contacts', event)">ğŸ“ Contacts</button>

Â  Â  Â  Â  Â  Â  <button class="tab" data-tab-name="issues" onclick="showTab('issues', event)">ğŸ”§ Issues</button>

Â  Â  Â  Â  </div>



Â  Â  Â  Â  <div class="content">

Â  Â  Â  Â  Â  Â  <div id="ledger" class="tab-content active">

Â  Â  Â  Â  Â  Â  Â  Â  <div class="setup-notice">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>âš ï¸ Database Setup Required</h3>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>To use this app, you need to set up a Supabase database. Create a free account at <strong>supabase.com</strong>, create a new project, and replace the URL and API key in the JavaScript code below. Then create the required tables using the SQL provided in the comments.</p>

Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <h2>ğŸ’° Apartment Ledger</h2>

Â  Â  Â  Â  Â  Â  Â  Â  <form id="ledgerForm">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-row">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="ledgerDate">Date</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="date" id="ledgerDate" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="ledgerType">Type</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="ledgerType" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Type</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="income">Income</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="expense">Expense</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="ledgerAmount">Amount</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="ledgerAmount" step="0.01" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="ledgerDescription">Description</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="ledgerDescription" placeholder="e.g., Rent payment, Maintenance fee" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Add Entry</button>

Â  Â  Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <table class="data-table" id="ledgerTable">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Date</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Type</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Description</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Amount</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Action</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </thead>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody></tbody>

Â  Â  Â  Â  Â  Â  Â  Â  </table>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div id="contacts" class="tab-content">

Â  Â  Â  Â  Â  Â  Â  Â  <h2>ğŸ“ Contacts</h2>

Â  Â  Â  Â  Â  Â  Â  Â  <form id="contactForm">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-row">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="contactName">Name</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="contactName" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="contactPhone">Phone</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="tel" id="contactPhone" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-row">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="contactEmail">Email</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="contactEmail">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="contactType">Type</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="contactType" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Type</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="landlord">Landlord</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="maintenance">Maintenance</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="neighbor">Neighbor</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="emergency">Emergency</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="other">Other</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="contactNotes">Notes</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="contactNotes" rows="3"></textarea>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Add Contact</button>

Â  Â  Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <table class="data-table" id="contactsTable">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Name</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Phone</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Email</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Type</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Notes</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Action</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </thead>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody></tbody>

Â  Â  Â  Â  Â  Â  Â  Â  </table>

Â  Â  Â  Â  Â  Â  </div>



Â  Â  Â  Â  Â  Â  <div id="issues" class="tab-content">

Â  Â  Â  Â  Â  Â  Â  Â  <h2>ğŸ”§ Issues Tracker</h2>

Â  Â  Â  Â  Â  Â  Â  Â  <form id="issueForm">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-row">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="issueTitle">Title</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="issueTitle" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="issuePriority">Priority</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="issuePriority" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Priority</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="low">Low</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="medium">Medium</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="high">High</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="urgent">Urgent</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="issueStatus">Status</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="issueStatus" required>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="open">Open</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="in-progress">In Progress</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="closed">Closed</option>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="form-group">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="issueDescription">Description</label>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="issueDescription" rows="4" required></textarea>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">Add Issue</button>

Â  Â  Â  Â  Â  Â  Â  Â  </form>

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  <table class="data-table" id="issuesTable">

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Title</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Priority</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Status</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Description</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Created</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <th>Action</th>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </tr>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </thead>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody></tbody>

Â  Â  Â  Â  Â  Â  Â  Â  </table>

Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>

Â  Â  </div>



Â  Â  <div id="dbStatus" class="db-status db-disconnected">

Â  Â  Â  Â  Database: Not Connected

Â  Â  </div>



Â  Â  <script>

Â  Â  Â  Â  // Supabase Configuration

Â  Â  Â  Â  const SUPABASE_URL = 'https://gskxwzccicetokmzoewj.supabase.co';

Â  Â  Â  Â  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdza3h3emNjaWNldG9rbXpvZXdqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk5MjcyMjYsImV4cCI6MjA2NTUwMzIyNn0.Smz5ai8xzfnqYI3AeGoOADUNtskE9qsw5WXdOw9EuwE';



Â  Â  Â  Â  // Initialize Supabase client

Â  Â  Â  Â  let supabase = null;

Â  Â  Â  Â  let dbConnected = false;



Â  Â  Â  Â  // Self-executing async function for immediate Supabase client initialization

Â  Â  Â  Â  (async () => {

Â  Â  Â  Â  Â  Â  if (SUPABASE_URL && SUPABASE_ANON_KEY) {

Â  Â  Â  Â  Â  Â  Â  Â  try {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Correct way to initialize Supabase client when loaded via CDN

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // The 'supabase' object is made globally available by the CDN script.

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dbConnected = true;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDbStatus(); // Update UI status

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('Supabase client initialized successfully.');

Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Failed to initialize Supabase client:', error);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  dbConnected = false;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateDbStatus(); // Update UI status to disconnected

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  dbConnected = false;

Â  Â  Â  Â  Â  Â  Â  Â  updateDbStatus();

Â  Â  Â  Â  Â  Â  Â  Â  console.warn('Supabase URL or Anon Key are missing. Please update them to connect to your database.');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  })();





Â  Â  Â  Â  // Function to handle tab switching logic

Â  Â  Â  Â  function showTab(tabName, event) {

Â  Â  Â  Â  Â  Â  // Hide all tab content sections

Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab-content').forEach(content => {

Â  Â  Â  Â  Â  Â  Â  Â  content.classList.remove('active');

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Deactivate all tab buttons

Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab').forEach(tabButton => {

Â  Â  Â  Â  Â  Â  Â  Â  tabButton.classList.remove('active');

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Show the selected tab's content

Â  Â  Â  Â  Â  Â  const selectedContent = document.getElementById(tabName);

Â  Â  Â  Â  Â  Â  if (selectedContent) {

Â  Â  Â  Â  Â  Â  Â  Â  selectedContent.classList.add('active');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Activate the clicked tab button

Â  Â  Â  Â  Â  Â  if (event && event.target) { // 'event.target' refers to the clicked button

Â  Â  Â  Â  Â  Â  Â  Â  event.target.classList.add('active');

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Load data specific to the newly active tab

Â  Â  Â  Â  Â  Â  loadData(tabName);

Â  Â  Â  Â  }



Â  Â  Â  Â  // Function to update the database connection status display

Â  Â  Â  Â  function updateDbStatus() {

Â  Â  Â  Â  Â  Â  const statusEl = document.getElementById('dbStatus');

Â  Â  Â  Â  Â  Â  if (statusEl) { // Ensure the status element exists

Â  Â  Â  Â  Â  Â  Â  Â  if (dbConnected) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusEl.textContent = 'Database: Connected';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusEl.className = 'db-status db-connected';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Hide the setup notice if connected successfully

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.setup-notice').forEach(notice => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  notice.style.display = 'none';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusEl.textContent = 'Database: Not Connected';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  statusEl.className = 'db-status db-disconnected';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Show the setup notice if disconnected

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.setup-notice').forEach(notice => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  notice.style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Function to insert data into a Supabase table

Â  Â  Â  Â  async function insertData(table, data) {

Â  Â  Â  Â  Â  Â  if (!dbConnected || !supabase) { // Check for active connection

Â  Â  Â  Â  Â  Â  Â  Â  alert('Database not connected. Please set up Supabase credentials.');

Â  Â  Â  Â  Â  Â  Â  Â  return null;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const { data: insertedData, error } = await supabase

Â  Â  Â  Â  Â  Â  Â  Â  .from(table) // Specify the target table

Â  Â  Â  Â  Â  Â  Â  Â  .insert([data]) // Insert the data (as an array of objects)

Â  Â  Â  Â  Â  Â  Â  Â  .select(); // Request the inserted data back



Â  Â  Â  Â  Â  Â  if (error) {

Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Error inserting into ${table}:`, error.message);

Â  Â  Â  Â  Â  Â  Â  Â  alert(`Error adding item: ${error.message}`);

Â  Â  Â  Â  Â  Â  Â  Â  return null;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  console.log(`Inserted into ${table}:`, insertedData);

Â  Â  Â  Â  Â  Â  return insertedData[0]; // Return the first inserted record

Â  Â  Â  Â  }



Â  Â  Â  Â  // Function to fetch data from a Supabase table

Â  Â  Â  Â  async function fetchData(table) {

Â  Â  Â  Â  Â  Â  if (!dbConnected || !supabase) return []; // Return empty array if not connected



Â  Â  Â  Â  Â  Â  const { data, error } = await supabase

Â  Â  Â  Â  Â  Â  Â  Â  .from(table) // Specify the target table

Â  Â  Â  Â  Â  Â  Â  Â  .select('*') // Select all columns

Â  Â  Â  Â  Â  Â  Â  Â  .order('created_at', { ascending: false }); // Order by creation date (newest first)



Â  Â  Â  Â  Â  Â  if (error) {

Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Error fetching from ${table}:`, error.message);

Â  Â  Â  Â  Â  Â  Â  Â  alert(`Error fetching data: ${error.message}`);

Â  Â  Â  Â  Â  Â  Â  Â  return [];

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  console.log(`Fetched from ${table}:`, data);

Â  Â  Â  Â  Â  Â  return data;

Â  Â  Â  Â  }



Â  Â  Â  Â  // Function to delete data from a Supabase table

Â  Â  Â  Â  async function deleteData(table, id) {

Â  Â  Â  Â  Â  Â  if (!dbConnected || !supabase) { // Check for active connection

Â  Â  Â  Â  Â  Â  Â  Â  alert('Database not connected. Please set up Supabase credentials.');

Â  Â  Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const { error } = await supabase

Â  Â  Â  Â  Â  Â  Â  Â  .from(table)

Â  Â  Â  Â  Â  Â  Â  Â  .delete()

Â  Â  Â  Â  Â  Â  Â  Â  .eq('id', id); // Condition: delete the row where 'id' matches



Â  Â  Â  Â  Â  Â  if (error) {

Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Error deleting from ${table}:`, error.message);

Â  Â  Â  Â  Â  Â  Â  Â  alert(`Error deleting item: ${error.message}`);

Â  Â  Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  console.log(`Deleted from ${table} where id = ${id}`);

Â  Â  Â  Â  Â  Â  return true;

Â  Â  Â  Â  }



Â  Â  Â  Â  // Helper function to create a table row based on the table type and item data

Â  Â  Â  Â  function createTableRow(table, item) {

Â  Â  Â  Â  Â  Â  const row = document.createElement('tr');

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  switch (table) {

Â  Â  Â  Â  Â  Â  Â  Â  case 'ledger':

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  row.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.date}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.type}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.description}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>â‚¹${item.amount ? item.amount.toFixed(2) : '0.00'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td><button class="delete-btn" onclick="deleteItem('ledger', ${item.id})">Delete</button></td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  Â  Â  case 'contacts':

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Ensure these properties match your Supabase 'contacts' table columns exactly

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  row.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.name || '-'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.phone || '-'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.email || '-'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.type || '-'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.notes || '-'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td><button class="delete-btn" onclick="deleteItem('contacts', ${item.id})">Delete</button></td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  Â  Â  case 'issues':

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Ensure these properties match your Supabase 'issues' table columns exactly

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  row.innerHTML = `

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.title || '-'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.priority || '-'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td><span class="status ${item.status || 'open'}">${item.status || 'Open'}</span></td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.description || '-'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td>${item.created_at ? new Date(item.created_at).toLocaleDateString() : '-'}</td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <td><button class="delete-btn" onclick="deleteItem('issues', ${item.id})">Delete</button></td>

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  return row;

Â  Â  Â  Â  }



Â  Â  Â  Â  // Function to load and render data into the specified table

Â  Â  Â  Â  async function loadData(table) {

Â  Â  Â  Â  Â  Â  const data = await fetchData(table); // Fetch data from Supabase

Â  Â  Â  Â  Â  Â  const tableBody = document.querySelector(`#${table}Table tbody`); // Get the table body element



Â  Â  Â  Â  Â  Â  if (tableBody) { // Check if the table body exists (it won't for inactive tabs)

Â  Â  Â  Â  Â  Â  Â  Â  tableBody.innerHTML = ''; // Clear any existing rows

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  // Append a new row for each item fetched

Â  Â  Â  Â  Â  Â  Â  Â  data.forEach(item => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const row = createTableRow(table, item);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tableBody.appendChild(row);

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  // This warning is normal for tabs that are not currently active,

Â  Â  Â  Â  Â  Â  Â  Â  // as their table bodies are not displayed.

Â  Â  Â  Â  Â  Â  Â  Â  console.warn(`Table body for #${table}Table tbody not found. This is expected if the tab is not active.`);

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // Function to delete an item from the database and refresh the table

Â  Â  Â  Â  async function deleteItem(table, id) {

Â  Â  Â  Â  Â  Â  if (confirm('Are you sure you want to delete this item?')) {

Â  Â  Â  Â  Â  Â  Â  Â  const success = await deleteData(table, id);

Â  Â  Â  Â  Â  Â  Â  Â  if (success) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadData(table); // Reload data for the current tab after deletion

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  }



Â  Â  Â  Â  // *** All DOM-related interactions and initial data loading should happen AFTER the DOM is fully loaded. ***

Â  Â  Â  Â  document.addEventListener('DOMContentLoaded', () => {

Â  Â  Â  Â  Â  Â  // Set default date for the Ledger form to today

Â  Â  Â  Â  Â  Â  const ledgerDateInput = document.getElementById('ledgerDate');

Â  Â  Â  Â  Â  Â  if (ledgerDateInput) {

Â  Â  Â  Â  Â  Â  Â  Â  ledgerDateInput.value = new Date().toISOString().split('T')[0];

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // Event listener for Ledger form submission

Â  Â  Â  Â  Â  Â  const ledgerForm = document.getElementById('ledgerForm');

Â  Â  Â  Â  Â  Â  if (ledgerForm) {

Â  Â  Â  Â  Â  Â  Â  Â  ledgerForm.addEventListener('submit', async (e) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  date: ledgerDateInput ? ledgerDateInput.value : '',

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: document.getElementById('ledgerType').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description: document.getElementById('ledgerDescription').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  amount: parseFloat(document.getElementById('ledgerAmount').value)

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const result = await insertData('ledger', data);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (result) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ledgerForm.reset(); // Clear the form

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadData('ledger'); // Reload ledger data

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // Event listener for Contact form submission

Â  Â  Â  Â  Â  Â  const contactForm = document.getElementById('contactForm');

Â  Â  Â  Â  Â  Â  if (contactForm) {

Â  Â  Â  Â  Â  Â  Â  Â  contactForm.addEventListener('submit', async (e) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  name: document.getElementById('contactName').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  phone: document.getElementById('contactPhone').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  email: document.getElementById('contactEmail').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  type: document.getElementById('contactType').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  notes: document.getElementById('contactNotes').value

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const result = await insertData('contacts', data);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (result) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  contactForm.reset(); // Clear the form

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadData('contacts'); // Reload contacts data

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // Event listener for Issue form submission

Â  Â  Â  Â  Â  Â  const issueForm = document.getElementById('issueForm');

Â  Â  Â  Â  Â  Â  if (issueForm) {

Â  Â  Â  Â  Â  Â  Â  Â  issueForm.addEventListener('submit', async (e) => {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  title: document.getElementById('issueTitle').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  description: document.getElementById('issueDescription').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  priority: document.getElementById('issuePriority').value,

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  status: document.getElementById('issueStatus').value

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const result = await insertData('issues', data);

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (result) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  issueForm.reset(); // Clear the form

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadData('issues'); // Reload issues data

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  }



Â  Â  Â  Â  Â  Â  // Dynamically assign data-tab-name and onclick handlers to tab buttons

Â  Â  Â  Â  Â  Â  document.querySelectorAll('.tab').forEach(button => {

Â  Â  Â  Â  Â  Â  Â  Â  // Extract tab name from button text content (e.g., "ğŸ’° Ledger" -> "ledger")

Â  Â  Â  Â  Â  Â  Â  Â  let tabName = button.textContent.toLowerCase().split(' ')[1]; // Takes the word after the emoji

Â  Â  Â  Â  Â  Â  Â  Â  if (!tabName) { // Fallback if emoji parsing fails

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (button.textContent.includes('Ledger')) tabName = 'ledger';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (button.textContent.includes('Contacts')) tabName = 'contacts';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  else if (button.textContent.includes('Issues')) tabName = 'issues';

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  Â  Â  button.setAttribute('data-tab-name', tabName); // Set a data attribute for easier lookup

Â  Â  Â  Â  Â  Â  Â  Â  button.onclick = (event) => showTab(tabName, event); // Assign click handler

Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â Â 

Â  Â  Â  Â  Â  Â  // Initial data load for the default active tab (Ledger) when the page loads

Â  Â  Â  Â  Â  Â  const initialTabButton = document.querySelector('.tab.active');

Â  Â  Â  Â  Â  Â  if (initialTabButton) {

Â  Â  Â  Â  Â  Â  Â  Â  const tabName = initialTabButton.getAttribute('data-tab-name');

Â  Â  Â  Â  Â  Â  Â  Â  if (tabName) {

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadData(tabName);

Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } else {

Â  Â  Â  Â  Â  Â  Â  Â  // Fallback to load ledger if no active tab is found for some reason

Â  Â  Â  Â  Â  Â  Â  Â  loadData('ledger');Â 

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // The db status is already updated by the async IIFE on supabase client init

Â  Â  Â  Â  });

Â  Â  </script>

</body>

</html>
